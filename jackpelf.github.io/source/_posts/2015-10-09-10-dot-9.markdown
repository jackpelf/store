---  
layout: post  
title: "10.9"  
date: 2015-10-09 23:09:07 +0800  
comments: true  
categories:   
---  
###0x00 twisted  
pacman -S twisted  
pip install twisted  
  
dataReceived(self, data)  
Called whenever data is received.  
  
###0x01 windows  
句柄是windows标识，由应用程序建立或使用的对象的唯一 整数值  
用来标识应用程序实例，窗口。。。  
当一个进程初始化时，系统要为它分配一个句柄表  
句柄值是放到句柄表中的索引  
windows是一个消息驱动式操作系统  
windows提供应用程序与应用程序之间，应用程序与windows系统之间进行通讯的手段  
应用程序想要实现的功能由消息来触发，并靠对消息的响应和处理来完成  
windows有两种消息队列，系统消息队列，应用程序消息队列  
当一个事件发生，windows先将输入的消息放入系统队列，再放入应用程序队列  
应用程序循环检索它的消息队列并发送给相应的窗口函数  
SendMessage函数，将一条消息发送给那个窗口，除非处理完，否则不会返回  
WM_COMMAND当用户从菜单或按钮中选择一条命令，发送给它的父窗口  
WM_DESTORY当一个窗口被破坏时发送  
WM_LBUTTONDOWN当光标在一个程序的客户区并按下左键时  
  
  
GetMessage（LPMSG lpMsg，HWND hWnd，UINT wMsgFilterMin，UINT wMsgFilterMax)  
lpMsg：指向MSG结构的指针，该结构从线程的消息队列里接收消息信息。  
hWnd：取得其消息的窗口的句柄。当其值取NULL时，GetMessage为任何属于调用线程的窗口检索消息，线程消息通过PostThreadMessage寄送给调用线程。  
wMsgFilterMin：指定被检索的最小消息值的整数。  
wMsgFilterMax：指定被检索的最大消息值的整数。  
  
DispatchMessage 该函数分发一个消息给窗口程序  
  
###0x02 ECDSA  
签名过程  
选择一条椭圆曲线Ep(a,b)和基点G  
选择私有密钥k(k<n,n为G的阶），利用基点G计算公开密钥K=kG  
产生一个随机整数r(r<n),计算R=rG  
将原数据和点R的坐标值x,y作为参数，计算SHA1作为hash,即hash=SHA1(原数据,x,y)  
计算s=r-hash*k(mod n)  
r和s做为签名值，如果r和s其中一个为零，返回第三步  
  
验证过程  
接收方收到消息m和签名值(r,s)后  
计算sG+H(m)P=(x1,y1) r1=x1 mod p  
验证r1=r mod p  
如果成立接受签名  
  
  
###0x03  
python %r	打印内存格式  
  
###0x04  
Miracl大数运算库,支持RSA,DH,DSA,ECDSA。  
GMP核心使用汇编实现，速度非常快，常用来大整数因子的分解  
OPENSSL  
  
  
  
