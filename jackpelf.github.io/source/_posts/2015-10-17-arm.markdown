---  
layout: post  
title: "arm"  
date: 2015-10-17 00:09:20 +0800  
comments: true  
categories:   
---  
###0x00 armel&armhf  
armel浮点参数必须先通过整数寄存器，然后传递到浮点运算单元  
armhf直接通过传递参数到浮点寄存器  
  
###0x01 ARM指令集  
arm 分为thumb和arm指令集  
在编写thumb指令时，先要使用CODE16声明  
在ARM指令中要使用BX指令跳到thumb指令，切换处理器状态  
ARM指令是32位的，thumb指令是16位的  
thumb指令集没有协处理器指令，信号量指令，以及访问CPSR或SPSR的指令，，，  
  
ARM指令寻址方式：立即数寻址，寄存器寻址，寄存器间接寻址，寄存器移位寻址，基址变址寻址，多寄存器寻址，相对寻址，堆栈寻址  
ARM指令编码格式  
  
	31~28	|27~26	|25	|24~21	|20	|19~16	|15~12	|11~0  
	cond	|00	|	|opcode	|S	|Rn	|Rd	|Op2  
  
S:条件码  
Rn:第一操作数寄存器  
Rd:目标寄存器  
Op2:第二操作数  
  
指令后加个S表示更新标志位  
  
1.数据传送指令MOV	MVN  
2.移位指令  
LSL/LSR(逻辑)  
ASR(算术)  
ROR/RRX(循环)  
3.算术指令ADD/ADC/SUB/SBC  
RSB/RSC操作数与SUB相反  
4.逻辑运算指令  
AND/ORR  
EOR(异或)  
BIC(位清零指令)  
5.比较指令  
CMP/CMN  
TST(检查某位检查是否为1)  
TEQ(根据异或结果设置标志位)  
6.乘法指令  
MUL  
MLA(相乘后再相加)  
SMUUL32位乘以32位  
SMLAL32位乘以32位,在加一个数  
UMULL无符号数  
UMLAL  
7.数据加载与储存指令  
分为三种类型:单寄存器加载和储存指令，多寄存器加载和储存指令，交换指令  
地址索引  
前索引：指令执行前把偏移量和基址相加减  
自动索引,传送后自动修改基址寄存器  
后索引:用基址寄存器的地址值寻址，找出操作数进行操作，再把偏移量和基址相加减，结果送到基址寄存器  
单寄存器加载和储存指令  
LDR/STR	32位  
LDRB/STRB	字节  
LDRH/STRH	半字节  
LDRSB/LDRSH	有符号数  
多寄存器指令  
LDM从基址寄存器指示的一片连续储存器中读取数据到多个寄存器中  
STM将寄存器列表的值存入基址寄存器指示的一片储存器中  
修饰类型  
IA(传送后地址加)  
IB(传送前地址加)  
DA(传送后地址减)  
DB(传送前地址减)  
堆栈操作  
FD	满递减  
ED	空递减  
FA	满递增  
EA	空递增  
  
  
  
